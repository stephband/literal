/* Literal 
   0.9.1
   By Stephen Band */

import{a as n,b as o}from"../chunk-WOU4QVWT.js";import{b as a,j as c,n as l,p as u}from"../chunk-AUPHWLOK.js";var m=/^(\{|\[)/;function h(t){return m.test(t)?JSON.parse(t):Number.isNaN(Number(t))?t==="true"?!0:t==="false"?!1:t:Number(t)}function d(t){let e=Object.keys(t);return Object.values(t).map(h).reduce((r,i,p)=>(r[e[p]]=i,r),{})}var E=o('<template is="literal-html">',{construct:function(){let t=n(this);t.initialised=!1,t.pushed=!1,t.data=a.of(),t.renderer=new u(this,this.parentElement)},connect:function(t){let e=n(this);e.initialised||(e.initialised=!0,a.observe(e.data,()=>{let{data:s,renderer:r}=e;if(!s.value)return;let i=r.push(s.value);e.pushed||(e.pushed=!0,this.replaceWith(i))}),!e.promise&&!e.pushed&&(e.data.value=d(this.dataset)))}},{src:{attribute:function(t){this.src=t},get:function(){return n(this).src},set:function(t){let e=n(this);e.src=t,e.promise&&(e.promise.cancelled=!0,e.promise=void 0);let s=e.promise=l(t).then(r=>{s.cancelled||(this.data=r)}).catch(r=>o.replaceWith(c(this,r)))}},data:{attribute:function(t){try{this.data=JSON.parse(t)}catch{throw new Error('Invalid JSON in <template is="literal-template"> data attribute: "'+t+'"')}},get:function(){let t=n(this);return t.renderer?t.renderer.data:null},set:function(t){let e=n(this);e.data.value=t||null}}},null,"stephen.band/literal/");export{E as default};
