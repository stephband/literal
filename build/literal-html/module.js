/* Literal 
   0.9.0
   By Stephen Band */

import{a as n,b as c}from"../chunk-ZYZYAXRZ.js";import{b as s,c as a,q as o,s as l}from"../chunk-7JOO4XMD.js";var p=/^(\{|\[)/,m=s;function h(t){return p.test(t)?JSON.parse(t):Number.isNaN(Number(t))?t==="true"?!0:t==="false"?!1:t:Number(t)}function f(t){let e=Object.keys(t);return Object.values(t).map(h).reduce((r,u,d)=>(r[e[d]]=u,r),{})}var S=c('<template is="literal-html">',{construct:function(){let t=n(this);t.initialised=!1,t.pushed=!1,t.data=a.of(),t.data.id="literal-html data",t.renderer=new l(this,this.parentElement),window.rndr=t.renderer},connect:function(t){console.log("Connect ------------");let e=n(this);e.initialised||(e.initialised=!0,e.data.observe(()=>{let{data:i,renderer:r}=e;i.value&&(r.push(i.value),e.pushed||(e.pushed=!0,this.replaceWith(r.content)))}).id="literal-html observer",!e.promise&&!e.pushed&&(e.data.value=f(this.dataset)))}},{src:{attribute:function(t){this.src=t},get:function(){return n(this).src},set:function(t){let e=n(this);e.src=t,e.promise&&(e.promise.cancelled=!0,e.promise=void 0);let i=e.promise=o(t).then(r=>{i.cancelled||(this.data=r)}).catch(r=>m(r,this))}},data:{attribute:function(t){try{this.data=JSON.parse(t)}catch{throw new Error('Invalid JSON in <template is="literal-template"> data attribute: "'+t+'"')}},get:function(){let t=n(this);return t.renderer?t.renderer.data:null},set:function(t){let e=n(this);e.data.value=t||null}}},null,"stephen.band/literal/");export{S as default};
