/* Literal 
   0.9.0
   By Stephen Band */

import{a as r,b as l}from"../chunk-MALENQDV.js";import{b as a,c as i,q as o,s as c}from"../chunk-VEBJAMYQ.js";var m=/^(\{|\[)/,d=a;function h(t){return m.test(t)?JSON.parse(t):Number.isNaN(Number(t))?t==="true"?!0:t==="false"?!1:t:Number(t)}function f(t){let e=Object.keys(t);return Object.values(t).map(h).reduce((n,u,p)=>(n[e[p]]=u,n),{})}var j=l('<template is="literal-html">',{construct:function(){let t=r(this);t.initialised=!1,t.pushed=!1,t.data=i.of(),t.renderer=new c(this,this.parentElement)},connect:function(t){let e=r(this);e.initialised||(e.initialised=!0,i.observe(e.data,()=>{let{data:s,renderer:n}=e;s.value&&(n.push(s.value),e.pushed||(e.pushed=!0,this.replaceWith(n.content)))}),!e.promise&&!e.pushed&&(e.data.value=f(this.dataset)))}},{src:{attribute:function(t){this.src=t},get:function(){return r(this).src},set:function(t){let e=r(this);e.src=t,e.promise&&(e.promise.cancelled=!0,e.promise=void 0);let s=e.promise=o(t).then(n=>{s.cancelled||(this.data=n)}).catch(n=>d(n,this))}},data:{attribute:function(t){try{this.data=JSON.parse(t)}catch{throw new Error('Invalid JSON in <template is="literal-template"> data attribute: "'+t+'"')}},get:function(){let t=r(this);return t.renderer?t.renderer.data:null},set:function(t){let e=r(this);e.data.value=t||null}}},null,"stephen.band/literal/");export{j as default};
