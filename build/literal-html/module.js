/* Literal 
   0.9.0
   By Stephen Band */

import{a as r,b as u}from"../chunk-IMRNB2BP.js";import{b as o,c as a,q as c,s as l}from"../chunk-QO55VDYK.js";var m=/^(\{|\[)/,d=o;function f(t){return m.test(t)?JSON.parse(t):Number.isNaN(Number(t))?t==="true"?!0:t==="false"?!1:t:Number(t)}function h(t){let e=Object.keys(t);return Object.values(t).map(f).reduce((n,i,p)=>(n[e[p]]=i,n),{})}var j=u('<template is="literal-html">',{construct:function(){let t=r(this);t.initialised=!1,t.pushed=!1,t.data=a.of(),t.renderer=new l(this,this.parentElement)},connect:function(t){let e=r(this);e.initialised||(e.initialised=!0,a.observe(e.data,()=>{let{data:s,renderer:n}=e;if(!s.value)return;let i=n.push(s.value);e.pushed||(e.pushed=!0,this.replaceWith(i))}),!e.promise&&!e.pushed&&(e.data.value=h(this.dataset)))}},{src:{attribute:function(t){this.src=t},get:function(){return r(this).src},set:function(t){let e=r(this);e.src=t,e.promise&&(e.promise.cancelled=!0,e.promise=void 0);let s=e.promise=c(t).then(n=>{s.cancelled||(this.data=n)}).catch(n=>d(n,this))}},data:{attribute:function(t){try{this.data=JSON.parse(t)}catch{throw new Error('Invalid JSON in <template is="literal-template"> data attribute: "'+t+'"')}},get:function(){let t=r(this);return t.renderer?t.renderer.data:null},set:function(t){let e=r(this);e.data.value=t||null}}},null,"stephen.band/literal/");export{j as default};
