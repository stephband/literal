/* Literal 
   0.6.4
   By Stephen Band
   Built 2023-03-28 02:34 */

import{b as s,c as y,d as p,e as a,g as b,h as w}from"../chunk-VNQL5CKK.js";import{f as i,n as u,o as f,r as d,s as g}from"../chunk-63RWEIP7.js";var L=/^\/|\.|^https?:\/\//;function j(t){try{return JSON.parse(t)}catch{return t}}function k(t){return L.test(t)?d(t):j(t)}var E=(t,e)=>{throw a(e),t},O={construct:function(){let t=s(this),e=t.datas=i.of(),n=t.dataoutput=i.of(),D=t.templates=i.of(),l=this;e.each(r=>{typeof r=="string"?L.test(r)?(p(this),Promise.resolve(r).then(d).then(o=>n.push(o)).catch(o=>E(o,l,t)).finally(()=>a(this))):n.push(JSON.parse(r)):n.push(r)}),i.combine({data:n,template:D}).each(r=>{let{template:o,data:m}=r,c=t.renderer=new g(o,{body:document.body,element:l.parentElement,root:document.documentElement});c.push(m),l.replaceWith(c.content)});let h=Object.keys(this.dataset);if(h.length){let r=Object.values(this.dataset);Promise.all(r.map(k)).then(o=>n.push(o.reduce((m,c,I)=>(m[h[I]]=c,m),{})))}},connect:function(t){b(this)},load:function(t){a(this)}};var S=Object.assign,C=y("literal-include",O,S({data:{attribute:function(t){this.data=t},get:function(){let t=s(this);return t.renderer?t.renderer.data:null},set:function(t){s(this).datas.push(t)}},src:{attribute:function(t){let e=s(this);if(/^#/.test(t)){let n=u(t);e.templates.push(n);return}p(this),f(t).then(n=>{e.templates.push(n),a(this)})}}},w));export{C as default};
