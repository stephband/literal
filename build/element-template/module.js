/* Literal 
   0.6.4
   By Stephen Band
   Built 2023-03-28 02:34 */

import{a as T,b as o,c as d,d as D,e as q,f as N,h as w}from"../chunk-VNQL5CKK.js";import{a as O,b as m,c as v,e as L,g as f,i as p,j as k,k as S,n as j,q as A,r as I,s as P}from"../chunk-63RWEIP7.js";var K=Object.assign;function g(t,e){this.element=t,this.definitions=e,this.tokens=[]}K(g.prototype,{contains:function(t){return this.tokens.includes(t)},add:function(){let t=arguments.length;for(;t--;){let e=arguments[t];this.tokens.includes(e)||(this.tokens.push(e),this.supports(e)&&this.definitions[e].enable(this.element))}},remove:function(){let t=arguments.length;for(;t--;){let e=arguments[t];this.tokens.includes(e)&&(L(this.tokens,e),this.supports(e)&&this.definitions[e].disable(this.element))}},supports:function(t){return!!this.definitions&&!!this.definitions[t]}});var M=Array.prototype;function x(t,e){let n=t.tokens.slice(),s=M.slice.apply(e),i=n.length;for(;i--;)s.includes(n[i])&&n.splice(i,1);t.remove.apply(t,n),t.add.apply(t,s)}var Q=/^\.*\/|^https?:\/\//,W=p((t,e,n)=>typeof n,{string:function(t,e,n){let s=o(e);return Q.test(n)?(D(e),I(n).then(i=>s.data[t]=i).catch(i=>console.error(i)).finally(()=>q(e))):s.data[t]=JSON.parse(n),s.data},default:function(t,e,n){o(e)[t]=n}}),R=p((t,e)=>typeof e,{string:p((t,e)=>e,{attribute:t=>({attribute:function(e){o(this).data[t]=e}}),string:t=>({attribute:function(e){this[t]=e},get:function(){return o(this).data[t]},set:function(e){o(this).data[t]=e},default:""}),boolean:t=>({attribute:function(e){this[t]=e!==null},get:function(){return!!o(this).data[t]||!1},set:function(e){o(this).data[t]=!!e},default:!1}),number:t=>({attribute:function(e){this[t]=e},get:function(){return o(this).data[t]||0},set:function(e){o(this).data[t]=Number(e)},default:0}),tokens:t=>({attribute:function(e){this[t]=e||""},get:function(){let e=o(this);if(e[t])return e[t];let n=e[t]=new g;return e.data[t]=n.tokens=f(n.tokens),n},set:function(e){let n=this[t];x(n,(e+"").trim().split(/\s+/))},default:m}),src:t=>({attribute:function(e){this[t]=e},get:function(){return o(this).renderer.data[t]},set:function(e){W(t,this,e)},default:null}),default:(t,e)=>{throw e==="url"||e==="import"?new SyntaxError('Attribute type "'+e+'" should be "src"'):new SyntaxError('Attribute type "'+e+'" not supported')}}),object:O(1)});var U=Object.assign,X=Object.entries;var Y=`
    :host([loading]),
    :host([loading]) > * {
        transition: none !important;
    }
`;function Z(t,e){return t[e[0]]=R(e[0],e[1]),t}var V=v(t=>new Promise((e,n)=>{let s=k("link",{rel:"preload",as:"style",href:t});s.onload=()=>e(new URL(t,location)),s.onerror=n,document.head.append(s)}));function b(t,e,n={},s,i={},z=[]){let C=s?U(X(s).reduce(Z,{}),w):w;if(typeof e=="string"&&!/^#/.test(e)){console.error("TODO: Support external templates");return}let E=typeof e=="string"?j(e):e,y=[n,E,i];return z.forEach(r=>y.push(V(r))),E.content.querySelectorAll('link[rel="stylesheet"]').forEach(r=>y.push(V(r.href))),Promise.all(y).then(([r,F,H,...ot])=>d(t,{construct:function(l){let u=k("style",Y),h=o(this),a=h.renderer=new P(F,U({},H,{body:document.body,element:this,host:this,root:document.documentElement,shadow:l})),c=h.data={};l.append(u,a.content),r.construct&&r.construct.call(this,l,f(c),h)},connect:function(l){let u=o(this),{renderer:h,data:a}=u,c;for(c in s)c in a||(a[c]=s[c].default);u.loading&&(N(this),a.loading=!0),u.data=f(a),h.push(a),r.connect&&r.connect.call(this,l,f(a),u)}},C,null,"")).catch(r=>console.error(r))}var _=Object.assign,tt={is:!0,loading:!0};var It=Promise.resolve();function et(t){return!tt[t.name]}function nt(t,e){return et(e)&&(t[e.name]=e.value),t}var B={connect:function(){let t=o(this);if(!t.tag)throw new SyntaxError('<template is="element-template"> must have an attribute tag="name-of-element"');let e=t.attributes?t.attributes.reduce(nt,{}):m;t.src?t.src.then(n=>{let s=_({},n);delete s.default,b(t.tag,this,n.default||{},e,s,t.stylesheets)}):b(t.tag,this,{},e,{},t.stylesheets)}};var G=T(/^([\w-]+)(?:\s*:\s*(\w+))?\s*;?\s*/,{1:(t,e)=>(t.push({name:e[1]}),t),2:(t,e)=>{let n=S(t);return n.value=e[2],t},done:(t,e)=>e[0].length<e.input.length?G(t,e):t}),J=G;var $={tag:{attribute:function(t){let e=o(this);e.tag=t}},attributes:{attribute:function(t){let e=o(this);e.attributes=J([],t)}},src:{attribute:function(t){let e=o(this);e.src=import(A(t)).catch(n=>{throw new Error("<"+e.tag+'> not defined, failed to fetch src "'+t+'" '+n.message)})}},stylesheets:{attribute:function(t){let e=o(this);e.stylesheets=t.split(/\s+/)}}};var $t=d('<template is="element-template">',B,$,null,"stephen.band/literal/");export{$t as default};
