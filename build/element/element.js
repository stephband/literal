/* Literal 
   0.9.1
   By Stephen Band */

import{a as D,b as L}from"../chunk-WOU4QVWT.js";import{a as v,b as u,c as k,e as m,f as w,g as j,l,n as f,p as O}from"../chunk-AUPHWLOK.js";var A=Object.assign;function h(e,t){this.element=e,this.definitions=t,this.tokens=[]}A(h.prototype,{contains:function(e){return this.tokens.includes(e)},add:function(){let e=arguments.length;for(;e--;){let t=arguments[e];this.tokens.includes(t)||(this.tokens.push(t),this.supports(t)&&this.definitions[t].enable(this.element))}},remove:function(){let e=arguments.length;for(;e--;){let t=arguments[e];this.tokens.includes(t)&&(w(this.tokens,t),this.supports(t)&&this.definitions[t].disable(this.element))}},supports:function(e){return!!this.definitions&&!!this.definitions[e]}});var B=Array.prototype;function g(e,t){let n=e.tokens.slice(),s=B.slice.apply(t),a=n.length;for(;a--;)s.includes(n[a])&&n.splice(a,1);e.remove.apply(e,n),e.add.apply(e,s)}var c=Object.defineProperty,b=/^\.*\/|^https?:\/\//;var E={attribute:(e,t)=>({construct:function(){c(this,t,{value:u.of("")})},attribute:function(n){D(this).data[e]=n}}),property:(e,t)=>({construct:function(){c(this,t,{value:u.of()})},get:function(){return this[t].value},set:function(n){this[t].value=n}}),src:(e,t)=>({construct:function(){c(this,t,{value:u.of(null)})},attribute:function(n){this[e]=n},get:function(){return this[t].value},set:function(n){b.test(n)&&(console.log("Literal request "+e+' "'+n+'"'),f(n).then(s=>this[t].value=s).catch(s=>console.error(s)))}}),module:(e,t)=>({construct:function(){c(this,t,{value:u.of(null)})},attribute:function(n){this[e]=n},get:function(){return this.getAttribute(e)},set:function(n){b.test(n)&&f(n).then(s=>this[t].value=s).catch(s=>console.error(s))}}),string:(e,t)=>({construct:function(){c(this,t,{value:u.of("")})},attribute:function(n){this[e]=n},get:function(){return this[t].value},set:function(n){this[t].value=n}}),boolean:(e,t)=>({construct:function(){c(this,t,{value:u.of(!1)})},attribute:function(n){this[e]=n},get:function(){return this[t].value},set:function(n){this[t].value=!!n}}),number:(e,t)=>({construct:function(){c(this,t,{value:u.of(0)})},attribute:function(n){this[e]=n},get:function(){return this[t].value},set:function(n){let s=Number(n);if(Number.isNaN(s))throw new TypeError("Invalid value <"+this.tagName.toLowerCase()+">."+e+" expects a number");this[t].value=s}}),tokens:(e,t)=>({construct:function(){c(this,t,{value:new h})},attribute:function(n){this[e]=n||""},get:function(){return this[t]},set:function(n){let s=this[t];g(s,(n+"").trim().split(/\s+/))}}),json:(e,t)=>({construct:function(){c(this,t,{value:u.of(null)})},attribute:function(n){this[e]=n},get:function(){return this.getAttribute(e)},set:function(n){b.test(n)&&f(n).then(s=>this[t].value=s).catch(s=>console.error(s))}})},N=v((e,t)=>typeof t,{function:(e,t)=>{let n=l(e);return t(n)},object:j(1),string:(e,t)=>{let n=l(e);if(!E[t])throw new Error('element() property descriptor "'+t+'" not supported');return E[t](n,Symbol(n))}});var C=Object.assign,I=Object.entries;function P(e,t){return e[t[0]]=N(t[0],t[1]),e}function S(e){try{return JSON.parse(e)}catch{return e}}function G(e,t){let n=Object.keys(e);return Object.values(e).map(S).reduce((a,p,d)=>(a[n[d]]=p,a),t)}function U(e,t={},n={},s={}){let a="<"+e.replace(/^</,"").replace(/>$/,"")+">",p=m("template",{id:a,html:t.shadow}),d=Object.entries(t.templates).map(([i,o])=>m("template",{id:i,html:o}));document.head.append.apply(document.head,d);let T={shadow:"",construct:function(i,o){o.object={};let r=new O(p,this,C({host:this,shadow:i},s),void 0);i.appendChild(r.content),o.renderer=r,t.construct&&t.construct.call(this,i,o,o.object)},connect:function(i,o){let{renderer:r}=o;o.initialised||(o.initialised=!0,G(this.dataset,o.object),o.data=k.of(o.object)),o.renderer.push(o.data),t.connect&&t.connect.call(this,i,o,o.data)},disconnect:function(i,o){let{renderer:r}=o;o.renderer.push(null),t.disconnect&&t.disconnect.call(this,i,o,o.data)},enable:t.enable&&function(o,r){t.enable.call(this,o,r,r.data)},disable:t.disable&&function(o,r){t.disable.call(this,o,r,r.data)},reset:t.reset&&function(o,r){t.reset.call(this,o,r,r.data)},restore:t.restore&&function(o,r){t.restore.call(this,o,r,r.data)}},x=n?I(n).reduce(P,{}):{};return L(e,T,x,null,"")}export{U as default};
