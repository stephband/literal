/* Literal 
   0.9.2
   By Stephen Band */

import{a as p,b as L}from"../chunk-I4HUIZZT.js";import{a as k,b as u,c as w,e as d,f as j,g as O,k as h,o as g,p as D}from"../chunk-WEPF47BV.js";var C=Object.assign;function m(n,t){this.element=n,this.definitions=t,this.tokens=[]}C(m.prototype,{contains:function(n){return this.tokens.includes(n)},add:function(){let n=arguments.length;for(;n--;){let t=arguments[n];this.tokens.includes(t)||(this.tokens.push(t),this.supports(t)&&this.definitions[t].enable(this.element))}},remove:function(){let n=arguments.length;for(;n--;){let t=arguments[n];this.tokens.includes(t)&&(j(this.tokens,t),this.supports(t)&&this.definitions[t].disable(this.element))}},supports:function(n){return!!this.definitions&&!!this.definitions[n]}});var P=Array.prototype;function b(n,t){let e=n.tokens.slice(),o=P.slice.apply(t),f=e.length;for(;f--;)o.includes(e[f])&&e.splice(f,1);n.remove.apply(n,e),n.add.apply(n,o)}var c=Object.defineProperty,v=/^\.*\/|^https?:\/\//;var l={},E={attribute:(n,t)=>({construct:function(){c(this,t,{value:u.of("")})},attribute:function(e){p(this).data[n]=e}}),property:(n,t)=>({construct:function(){c(this,t,{value:u.of()})},get:function(){return this[t].value},set:function(e){this[t].value=e}}),src:(n,t)=>({construct:function(){c(this,t,{value:u.of(null)})},attribute:function(e){this[n]=e},get:function(){return this[t].value},set:function(e){v.test(e)&&(console.log("Literal request "+n+' "'+e+'"'),h(e).then(o=>this[t].value=o).catch(o=>console.error(o)))}}),module:(n,t)=>({construct:function(){c(this,t,{value:u.of(null)})},attribute:function(e){this[n]=e},get:function(){return this.getAttribute(n)},set:function(e){v.test(e)&&h(e).then(o=>this[t].value=o).catch(o=>console.error(o))}}),string:(n,t)=>({construct:function(){c(this,t,{value:u.of("")})},attribute:function(e){this[n]=e},get:function(){return this[t].value},set:function(e){this[t].value=e}}),boolean:(n,t)=>({construct:function(){c(this,t,{value:u.of(!1)})},attribute:function(e){this[n]=e},get:function(){return this[t].value},set:function(e){this[t].value=!!e}}),number:(n,t)=>({construct:function(){c(this,t,{value:u.of(0)})},attribute:function(e){this[n]=e},get:function(){return this[t].value},set:function(e){let o=Number(e);if(Number.isNaN(o))throw new TypeError("Invalid value <"+this.tagName.toLowerCase()+">."+n+" expects a number");this[t].value=o}}),tokens:(n,t)=>({construct:function(){c(this,t,{value:new m})},attribute:function(e){this[n]=e||""},get:function(){return this[t]},set:function(e){let o=this[t];b(o,(e+"").trim().split(/\s+/))}}),json:(n,t)=>({construct:function(){c(this,t,{value:u.of(null)})},attribute:function(e){this[n]=e},get:function(){return this.getAttribute(n)},set:function(e){v.test(e)&&h(e).then(o=>this[t].value=o).catch(o=>console.error(o))}}),data:(n,t)=>({get:function(){return p(this).renderer.data},set:function(e){p(this).renderer.push(e)}})},T=k((n,t)=>typeof t,{function:(n,t)=>{let e=g(n),o=l[e]||(l[e]=Symbol(e));return{construct:function(){c(this,o,{value:u.from(t,this)})},get:function(){return this[o].value}}},object:O(1),string:(n,t)=>{let e=g(n),o=l[e]||(l[e]=Symbol(e));if(!E[t])throw new Error('element() property descriptor "'+t+'" not supported');return E[t](e,o)}});var S=Object.entries;function G(n,t){return n[t[0]]=T(t[0],t[1]),n}function I(n,t={},e={}){let o="<"+n.replace(/^</,"").replace(/>$/,"")+">",f=d("template",{html:t.shadow}),x=Object.entries(t.templates).map(([i,s])=>d("template",{id:i,html:s}));document.head.append.apply(document.head,x);let A=e?S(e).reduce(G,{}):{},N="";return L(n,{shadow:"",construct:function(i,s){s.object={};let r={host:this,shadow:i,internals:s},a=D.fromFragment(o,f.content,this,r);i.appendChild(a.content),s.renderer=a,t.construct&&t.construct.call(this,i,s,s.object)},connect:function(i,s){let{renderer:r,object:a,data:B}=s;B||(s.data=w.of(a)),r.push(s.data),t.connect&&t.connect.call(this,i,s,s.data)},disconnect:function(i,s){let{renderer:r,data:a}=s;r.push(null),t.disconnect&&t.disconnect.call(this,i,s,a)},enable:t.enable&&function(s,r){t.enable.call(this,s,r,r.data)},disable:t.disable&&function(s,r){t.disable.call(this,s,r,r.data)},reset:t.reset&&function(s,r){t.reset.call(this,s,r,r.data)},restore:t.restore&&function(s,r){t.restore.call(this,s,r,r.data)}},A,null,N)}export{I as default};
